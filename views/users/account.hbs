<div class="row mt-3">
  <div class="col-4">
    <div class="d-flex flex-column align-items-center">
      <img class="avatar mb-5" src={{theUser.avatar}} alt="avatar">
      {{#if isMyself}}
      <a href="/accounts/{{theUser.id}}/edit" class="btn btn-outline-warning btn-sm mb-3">個 人 設 定</a>
      <a href="#" class="btn btn-outline-warning btn-sm" data-bs-toggle="modal" data-bs-target="#reset-password"
        onclick="document.getElementById('current-password').focus()">重 設 密 碼</a>
      {{/if}}
    </div>
  </div>
  <div class="col-8 ps-5 user-info">
    <h1 class="mb-3">{{theUser.name}}</h1>
    <p class="user-intro">{{theUser.introduction}}</p>
    <hr>
    <h5 class="mb-3">平均表現: <span>(以最新10筆紀錄為基準)</span></h5>
    <table class="table table-light mb-3 text-center">
      <thead class="table-primary">
        <tr>
          <th class="col-2">WPM</th>
          <th class="col-2">Accuracy Rate</th>
          <th class="col-2">Score</th>
          <th class="col-2">Rank</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="col-2 align-middle">{{myAvgRecord.wpm}}</td>
          <td class="col-2 align-middle">{{myAvgRecord.ar}} %</td>
          <td class="col-2 align-middle">{{myAvgRecord.score}}</td>
          <td class="col-2 align-middle">{{rank}} <span class="denominator">/{{totalUsers}}</span></td>
        </tr>
      </tbody>
    </table>
    <h5 class="mb-3">最佳表現: <span>(以最近6個月紀錄為基準)</span></h5>
    <table class="table table-light mb-3 text-center">
      <thead class="table-primary">
        <tr>
          <th class="col-2">WPM</th>
          <th class="col-2">Accuracy Rate</th>
          <th class="col-2">Score</th>
          <th class="col-2">Time</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="col-2 align-middle">{{bestRecord.wpm}}</td>
          <td class="col-2 align-middle">{{bestRecord.ar}} %</td>
          <td class="col-2 align-middle">{{bestRecord.score}}</td>
          <td class="col-2 align-middle">
            {{#if bestRecord.createdDate}}
            {{bestRecord.createdDate}}<br>{{bestRecord.createdTime}}
            {{else}}
            -
            {{/if}}
          </td>
        </tr>
      </tbody>
    </table>
    <h5 class="mb-3">活躍度:</h5>
    <div>
      <canvas id="activity-degree"></canvas>
    </div>
    <div hidden>
      {{#with recordPerMonth}}
      <span class="y-axis-num" id="Jan">{{Jan}}</span>
      <span class="y-axis-num" id="Feb">{{Feb}}</span>
      <span class="y-axis-num" id="Mar">{{Mar}}</span>
      <span class="y-axis-num" id="Apr">{{Apr}}</span>
      <span class="y-axis-num" id="May">{{May}}</span>
      <span class="y-axis-num" id="Jun">{{Jun}}</span>
      <span class="y-axis-num" id="Jul">{{Jul}}</span>
      <span class="y-axis-num" id="Aug">{{Aug}}</span>
      <span class="y-axis-num" id="Sep">{{Sep}}</span>
      <span class="y-axis-num" id="Oct">{{Oct}}</span>
      <span class="y-axis-num" id="Nov">{{Nov}}</span>
      <span class="y-axis-num" id="Dec">{{Dec}}</span>
      {{/with}}
    </div>
  </div>
</div>

<div class="modal" id="reset-password" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-body">
        <form action="/accounts/{{user.id}}/password?_method=PUT" method="POST">
          <div class="mb-3">
            <label for="current-password" class="col-form-label">請輸入原密碼:</label>
            <input type="password" id="current-password" name="password" class="form-control" minlength="6" required>
          </div>
          <div class="mb-3">
            <label for="new-password" class="col-form-label">請設定新密碼:</label>
            <input type="password" id="new-password" name="newPassword" class="form-control" placeholder="請設定6字元以上密碼"
              minlength="6" required>
          </div>
          <div class="mb-3">
            <label for="check-new-password" class="col-form-label">請再次輸入新密碼:</label>
            <input type="password" id="check-new-password" name="checkNewPassword" class="form-control" minlength="6"
              required>
          </div>
          {{!-- default email input --}}
          <div hidden>
            <label for="email"></label>
            <input type="email" id="email" name="email" value="{{user.email}}">
          </div>
          <div class="d-flex mt-5">
            <button type="button" class="btn btn-secondary ms-auto" data-bs-dismiss="modal">取消</button>
            <button type="submit" class="btn btn-primary ms-3">儲存</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>