{{#if user}}
<div class="d-flex">
  <button type="button" class="btn btn-primary ms-auto my-3" data-bs-toggle="modal" data-bs-target="#new-post"
    onclick="document.getElementById('title').focus()">建立貼文</button>
</div>
{{else}}
<p class="text-end">登入會員以建立貼文
  <a href="/signin" class="btn btn-outline-primary btn-sm">登入</a>
  或
  <a href="/signup" class="btn btn-outline-primary btn-sm">註冊</a>
</p>
{{/if}}
{{#each posts}}
<div class="post-owner row">
  <div class="img-section col-1 me-1 p-0">
    <a href="/accounts/{{this.userId}}"><img src={{this.userAvatar}} alt="avatar"></a>
  </div>
  <div class="col">
    <h5 class="m-0">{{this.username}}</h5>
    <p class="footnote m-0">{{this.createdDateTime}} 建立</p>
    <h5 class="text-dark fw-bold mt-1">{{this.title}}</h5>
  </div>
  <div class="col d-flex align-items-center">
    <a href="/posts/{{this.id}}" class="link-primary ms-auto me-5">查看內文</a>
  </div>
</div>
<hr>
{{/each}}

{{!-- new post modal --}}
<div class="modal" id="new-post" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-body">
        <form action="/posts" method="POST">
          <div class="mb-3">
            <label for="title" class="col-form-label">標題:</label>
            <input type="text" id="title" name="title" class="form-control" maxlength="70" required>
          </div>
          <div class="mb-3">
            <label for="body" class="col-form-label">內文:</label>
            <textarea id="body" name="body" class="form-control" rows="10" maxlength="100000"></textarea>
          </div>
          <div class="d-flex mt-3">
            <button type="button" class="btn btn-secondary ms-auto" data-bs-dismiss="modal">取消</button>
            <button type="submit" class="btn btn-primary ms-3">發文</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>